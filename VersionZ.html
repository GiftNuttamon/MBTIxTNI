<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÉ‡∏à MBT(N)I √ó ‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</title>
  <style>
    :root{
      --bg1:#0b1020; /* night */
      --bg2:#111b3a; /* galaxy */
      --neon:#8ad1ff;
      --neon2:#ce9bff;
      --candy1:#ff8bd1;
      --candy2:#8bffdd;
      --candy3:#ffe58b;
      --card:#0f1530cc;
      --white:#f8faff;
      --muted:#c9d3ff;
      --accent:#86ffb1;
      --danger:#ff6b8b;
      --ok:#7bf7ff;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    @media (prefers-color-scheme: light){
      :root{ --card:#eef2ffdd; --bg1:#e8f2ff; --bg2:#dfe7ff; --white:#0b1020; --muted:#2a2f4a; }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--white); font-family: system-ui, -apple-system, "Segoe UI", Roboto, Kanit, "Noto Sans JP", sans-serif;
      background:
        radial-gradient(1200px 800px at 10% -10%, #20306a66, transparent 60%),
        radial-gradient(1000px 600px at 90% 10%, #301a5f66, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* twinkling stars */
    .stars, .stars2{position:fixed; inset:0; pointer-events:none;}
    .stars{background: radial-gradient(2px 2px at 20% 30%, #fff, transparent 40%),
                         radial-gradient(1.5px 1.5px at 60% 70%, #fff, transparent 40%),
                         radial-gradient(1.5px 1.5px at 80% 20%, #fff, transparent 40%),
                         radial-gradient(2px 2px at 40% 80%, #fff, transparent 40%);
      opacity:.7; animation: twinkle 6s linear infinite alternate;
    }
    .stars2{background: radial-gradient(1.5px 1.5px at 15% 60%, #fff, transparent 40%),
                          radial-gradient(2px 2px at 75% 35%, #fff, transparent 40%),
                          radial-gradient(1.2px 1.2px at 50% 20%, #fff, transparent 40%);
      opacity:.4; animation: twinkle 9s linear infinite alternate-reverse;
    }
    @keyframes twinkle { from{filter:brightness(.9)} to{filter:brightness(1.3)} }

    /* 3D candy text */
    .candy3d{position:relative; display:inline-block; padding:.35em .7em; border-radius:999px;
      background: radial-gradient(120% 140% at 30% 20%, var(--candy2), var(--candy1) 50%, var(--candy3));
      color:#111; font-weight:900; letter-spacing:.5px; text-transform:none;
      box-shadow: inset 0 4px 8px #ffffffaa, inset 0 -10px 30px #00000022, var(--shadow);
    }
    .candy3d.big{ font-size: clamp(20px, 3.5vw, 44px); }
    .candy3d .shine{ position:absolute; inset:0; border-radius:999px; background: linear-gradient( to bottom, #ffffff55, #ffffff05 40% 60%, #00000022 ); mix-blend-mode: screen; pointer-events:none;}

    header{ position:sticky; top:0; z-index:50; backdrop-filter: blur(10px); background: linear-gradient( to right, #0b1020aa, #111b3aaa ); border-bottom:1px solid #ffffff22; }
    .bar{ max-width:1200px; margin:auto; display:flex; align-items:center; gap:16px; padding:12px 16px; }
    .brand{ display:flex; align-items:center; gap:10px; }
    .orb{ width:36px; height:36px; border-radius:50%; background: radial-gradient(circle at 30% 30%, var(--neon), transparent 60%), radial-gradient(circle at 70% 60%, var(--neon2), transparent 60%); box-shadow: 0 0 22px var(--neon), inset 0 0 10px var(--neon2); }
    .title{ font-size: clamp(16px, 2.2vw, 26px); font-weight:800; text-shadow: 0 1px 0 #fff3, 0 2px 0 #fff2, 0 3px 0 #fff1, 0 0 18px var(--neon2);
    }
    .lang{ margin-left:auto; display:flex; gap:8px; }
    .lang button{ background:linear-gradient(135deg, #2a3470, #623f9c); color:#fff; border:none; padding:8px 12px; border-radius:10px; cursor:pointer; box-shadow: var(--shadow); font-weight:700 }
    .lang button.active{ outline:2px solid var(--neon2); filter:brightness(1.1) }

    main{ max-width:1200px; margin: 20px auto 100px; padding: 0 16px; }

    .card{ background: var(--card); border:1px solid #ffffff22; border-radius: 22px; padding:20px; box-shadow: var(--shadow); backdrop-filter: blur(8px); }
    .grid{ display:grid; gap:16px; grid-template-columns: repeat(12, 1fr); }
    .col-12{ grid-column: span 12; }
    .col-6{ grid-column: span 6; }
    .col-4{ grid-column: span 4; }
    @media (max-width: 900px){ .col-6, .col-4{ grid-column: span 12; } }

    .btn{ display:inline-flex; align-items:center; gap:8px; background: linear-gradient(135deg, #2d3a7a, #6e3fc7); color:#fff; padding:12px 16px; border:none; border-radius:12px; cursor:pointer; font-weight:800; box-shadow: 0 10px 30px #0008; }
    .btn.secondary{ background: linear-gradient(135deg, #284056, #3b7189); }
    .btn.ghost{ background: transparent; border:1px dashed #9cc7ff66 }
    .btn:active{ transform: translateY(1px) }

    .step{ display:none; animation: fade .35s ease }
    .step.active{ display:block }
    @keyframes fade{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform:none } }

    /* Form */
    .field{ margin: 14px 0 }
    label{ display:block; color: var(--muted); font-weight:700; margin-bottom:6px }
    input, select{ width:100%; padding:12px 14px; border-radius:12px; border:1px solid #ffffff33; background:#0e1636; color:#fff; }
    .inline{ display:flex; gap:10px; flex-wrap:wrap }

    /* Quiz */
    .q{ padding:16px; border-radius:18px; border:1px solid #ffffff22; background: #0d1433aa; margin: 10px 0; }
    .q h4{ margin:0 0 8px; }
    .opt{ display:flex; gap:10px; align-items:center; }
    .opt label{ display:flex; gap:8px; align-items:center; background:#0a1330; padding:10px 12px; border-radius:12px; border:1px solid #ffffff22; cursor:pointer; }
    .opt input{ transform: scale(1.2) }

    /* Result + NPC animation */
    .portal{ position:relative; height:200px; border-radius:18px; border:1px dashed #7db2ff55; overflow:hidden; margin-top:16px; }
    .door{ position:absolute; right:16px; top: 50%; transform: translateY(-50%); width:100px; height:150px; border-radius: 50px 50px 10px 10px; background: radial-gradient(120px 120px at 40% 30%, #7dfbff66, transparent 60%),
      linear-gradient(180deg, #132b66, #2a74bb); box-shadow: inset 0 0 25px #fff6, 0 0 30px #62e8ff; animation: doorPulse 2.2s ease-in-out infinite; border:2px solid #9ed9ff; }
    @keyframes doorPulse{ 0%{ filter:brightness(1) } 60%{ filter:brightness(1.35)} 100%{ filter:brightness(1)} }
    .npc{ position:absolute; left:-80px; bottom:20px; display:flex; align-items:center; gap:10px; animation: walkToDoor 6s ease forwards; }
    .npc .emoji{ font-size:48px; filter: drop-shadow(0 6px 10px #0009) }
    .npc .tag{ padding:6px 10px; border-radius:999px; background: #0a1537; border:1px solid #ffffff33; box-shadow: var(--shadow); font-weight:700 }
    @keyframes walkToDoor{ 0%{ transform: translateX(0) } 100%{ transform: translateX(calc(100% - 140px)) } }

    /* Step 4 playground */
    .floaters{ position:relative; }
    .floater{ position:absolute; font-size: 28px; opacity:.7; animation: bob 6s ease-in-out infinite; filter: drop-shadow(0 4px 8px #0008) }
    .floater:nth-child(1){ top:6%; left:6%; animation-duration:8s }
    .floater:nth-child(2){ top:12%; right:10%; animation-duration:6.5s }
    .floater:nth-child(3){ bottom:14%; left:10%; animation-duration:7.5s }
    .floater:nth-child(4){ bottom:8%; right:12%; animation-duration:9s }
    @keyframes bob{ 0%{ transform: translateY(0)} 50%{ transform: translateY(-10px) } 100%{ transform: translateY(0) } }

    .faculty-grid{ display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .faculty{ position:relative; border-radius:20px; padding:16px; background: linear-gradient(180deg, #101a3d, #121a39); border: 1px solid #8fd1ff33; box-shadow: var(--shadow); }
    .faculty h3{ margin:.2em 0 .5em; }
    .badge{ display:inline-block; padding:6px 10px; background: #11224d; border:1px solid #5db7ff66; border-radius:999px; margin: 4px 6px 0 0; font-weight:800 }
    .reason{ font-size:.95em; color: var(--muted); margin:.3em 0 0 }

    .navs{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px }

    footer{ text-align:center; color:var(--muted); padding:40px 10px }
    .hint{ color:var(--muted); font-size:.9em }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="stars2"></div>
  <header>
    <div class="bar">
      <div class="brand">
        <div class="orb" aria-hidden="true"></div>
        <div class="title" id="appTitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÉ‡∏à MBT(N)I √ó ‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</div>
      </div>
      <div class="lang" role="group" aria-label="language switcher">
        <button id="btnTH" class="active" data-lang="th">TH</button>
        <button id="btnEN" data-lang="en">EN</button>
        <button id="btnJA" data-lang="ja">Êó•Êú¨Ë™û</button>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="card col-12" style="text-align:center">
      <div class="candy3d big"><span id="heroPill">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡πÇ‡∏•‡∏Å‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</span><span class="shine"></span></div>
      <p class="hint" id="heroHint">‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á Frontend‚Äî‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</p>
    </section>

    <!-- STEP 1: Profile -->
    <section id="step1" class="step active">
      <div class="grid">
        <div class="col-12 card">
          <h2 id="s1Title">STEP 1 ¬∑ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏Å‡∏•‡πâ‡∏≤</h2>
          <div class="field">
            <label id="lblNickname" for="nickname">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
            <input id="nickname" type="text" placeholder="Gift / „ÉÜ„Çπ„Éà" maxlength="20" />
          </div>
          <div class="field inline">
            <div style="flex:1">
              <label id="lblAge" for="age">‡∏≠‡∏≤‡∏¢‡∏∏</label>
              <input id="age" type="number" min="8" max="80" placeholder="18" />
            </div>
            <div style="flex:1">
              <label id="lblGender" for="gender">‡πÄ‡∏û‡∏®</label>
              <select id="gender">
                <option value="male" id="gMale">‡∏ä‡∏≤‡∏¢</option>
                <option value="female" id="gFemale">‡∏´‡∏ç‡∏¥‡∏á</option>
                <option value="other" id="gOther">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
              </select>
            </div>
          </div>
          <div class="navs">
            <button class="btn" id="toStep2">‚ú® ‡∏ï‡πà‡∏≠‡πÑ‡∏õ: ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
          </div>
        </div>
      </div>
    </section>

    <!-- STEP 2: MBTI Quiz -->
    <section id="step2" class="step">
      <div class="grid">
        <div class="col-12 card">
          <h2 id="s2Title">STEP 2 ¬∑ ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö MBTI</h2>
          <p class="hint" id="s2Hint">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ (16 ‡∏Ç‡πâ‡∏≠)</p>
          <div id="quiz"></div>
          <div class="navs">
            <button class="btn secondary" id="back1">‚óÄ ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
            <button class="btn" id="submitQuiz">üîÆ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
          </div>
        </div>
      </div>
    </section>

    <!-- STEP 3: Result + Animation -->
    <section id="step3" class="step">
      <div class="grid">
        <div class="col-12 card">
          <h2 id="s3Title">STEP 3 ¬∑ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</h2>
          <div id="resultBox" style="margin-bottom:12px"></div>
          <div class="portal" aria-label="npc animation">
            <div class="door" aria-hidden="true"></div>
            <div id="npc" class="npc" style="display:none">
              <div class="emoji" id="npcEmoji" aria-hidden="true">ü¶ä</div>
              <div class="tag" id="npcTag">NPC</div>
            </div>
          </div>
          <div class="navs">
            <button class="btn secondary" id="redo">üîÅ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</button>
            <button class="btn" id="goStep4">üåå ‡∏î‡∏π MBTI ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ì‡∏∞</button>
          </div>
        </div>
      </div>
    </section>

    <!-- STEP 4: All faculties fancy page -->
    <section id="step4" class="step">
      <div class="grid">
        <div class="col-12 card floaters">
          <h2 id="s4Title">STEP 4 ¬∑ ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</h2>
          <p class="hint" id="s4Hint">‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π MBTI ‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ì‡∏∞</p>
          <div class="floater">ü™Ñ</div>
          <div class="floater">üß™</div>
          <div class="floater">‚ú®</div>
          <div class="floater">üõ∏</div>
          <div id="facultyGrid" class="faculty-grid"></div>
          <div class="navs">
            <button class="btn secondary" id="back3">‚óÄ ‡∏Å‡∏•‡∏±‡∏ö</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div id="footText">¬© 2025 Fantasy MBT(N)I √ó Faculty ‚Äî Frontend only ‚Ä¢ No tracking</div>
    </footer>
  </main>

  <script>
    "use strict";

    // ===================== I18N =====================
    const i18n = {
      th: {
        appTitle: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡πÉ‡∏à MBT(N)I √ó ‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà",
        heroPill: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡πÇ‡∏•‡∏Å‡πÄ‡∏ß‡∏ó‡∏°‡∏ô‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà",
        heroHint: "‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á Frontend‚Äî‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß",
        s1Title: "STEP 1 ¬∑ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏Å‡∏•‡πâ‡∏≤",
        lblNickname:"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô", lblAge:"‡∏≠‡∏≤‡∏¢‡∏∏", lblGender:"‡πÄ‡∏û‡∏®", gMale:"‡∏ä‡∏≤‡∏¢", gFemale:"‡∏´‡∏ç‡∏¥‡∏á", gOther:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",
        toStep2:"‚ú® ‡∏ï‡πà‡∏≠‡πÑ‡∏õ: ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö",
        s2Title:"STEP 2 ¬∑ ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö MBTI", s2Hint:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ (16 ‡∏Ç‡πâ‡∏≠)",
        back:"‚óÄ ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö", submit:"üîÆ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö",
        s3Title:"STEP 3 ¬∑ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà",
        redo:"üîÅ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà", goStep4:"üåå ‡∏î‡∏π MBTI ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ì‡∏∞",
        s4Title:"STEP 4 ¬∑ ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà", s4Hint:"‡πÅ‡∏ï‡∏∞/‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π MBTI ‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ì‡∏∞", back3:"‚óÄ ‡∏Å‡∏•‡∏±‡∏ö",
        invalid:"‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö", needAll:"‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 16 ‡∏Ç‡πâ‡∏≠",
        yourType:"MBTI ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠", recommend:"‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥",
        reason:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",
        npcSays:(name, age)=>`NPC: ${name} (${age})` ,
        faculties: {
          eng:{ name:"‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", about:"‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡πÜ" },
          it:{ name:"‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®", about:"‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ ‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" },
          bus:{ name:"‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à", about:"‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏†‡∏≤‡∏Ñ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" },
          ic:{ name:"‡∏Ñ‡∏ì‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏™‡∏≤‡∏Å‡∏•", about:"‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏†‡∏≤‡∏©‡∏≤‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°" },
          dti:{ name:"‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°", about:"‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏†‡∏≤‡∏Ñ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°" }
        },
        // reasons per faculty per MBTI
        reasons: {
          eng:{ INTJ:"‡∏ô‡∏±‡∏Å‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ", ENTJ:"‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö", INTP:"‡∏ô‡∏±‡∏Å‡∏Ñ‡∏¥‡∏î‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏ö ‡∏ä‡∏≠‡∏ö‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤", ISTP:"‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏≥ ‡∏ä‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£" },
          it:{ INTP:"‡∏ô‡∏±‡∏Å‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡∏ä‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏ö", ENTP:"‡∏ä‡∏≠‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÜ", INFJ:"‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏±‡∏á‡∏Ñ‡∏°", ISFP:"‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•" },
          bus:{ ESTJ:"‡∏ô‡∏±‡∏Å‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö", ISTJ:"‡∏ô‡∏±‡∏Å‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à", ESFJ:"‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏î‡∏µ ‡∏£‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£", ENFJ:"‡∏ô‡∏±‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ô", ENFP:"‡∏ô‡∏±‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏î‡πâ‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" },
          ic:{ ENFP:"‡∏ô‡∏±‡∏Å‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à", ENTP:"‡∏ô‡∏±‡∏Å‡∏Ñ‡∏¥‡∏î‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏ö ‡πÄ‡∏Å‡πà‡∏á‡πÄ‡∏à‡∏£‡∏à‡∏≤‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠", INFJ:"‡∏ô‡∏±‡∏Å‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°", ENFJ:"‡∏ô‡∏±‡∏Å‡∏û‡∏π‡∏î ‡∏ô‡∏±‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏• ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå" },
          dti:{ INTJ:"‡∏ô‡∏±‡∏Å‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ", ENTJ:"‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°", ISTJ:"‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö", INTP:"‡∏ô‡∏±‡∏Å‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡∏ä‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÜ" }
        },
        ui:{ next:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ", selectAll:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î" },
        resultLine:(type, fac)=>`MBTI ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ <b>${type}</b> ‚Üí <b>${fac}</b>`
      },
      en: {
        appTitle:"Find Your Faculty Match ¬∑ MBT(N)I √ó The Right Faculty",
        heroPill:"Begin your magical quest for the right faculty",
        heroHint:"Frontend only ‚Äî no personal data is stored",
        s1Title:"STEP 1 ¬∑ Your Adventurer Profile",
        lblNickname:"Nickname", lblAge:"Age", lblGender:"Gender", gMale:"Male", gFemale:"Female", gOther:"Other",
        toStep2:"‚ú® Next: Take the Test",
        s2Title:"STEP 2 ¬∑ MBTI Quiz", s2Hint:"Choose the statement that fits you best (16 items)",
        back:"‚óÄ Back", submit:"üîÆ Submit",
        s3Title:"STEP 3 ¬∑ Result & The Door to Your Faculty",
        redo:"üîÅ Retake Quiz", goStep4:"üåå View MBTI √ó Faculty Mapping",
        s4Title:"STEP 4 ¬∑ Explore the Faculty Universe", s4Hint:"Tap/click cards to see MBTI & reasons", back3:"‚óÄ Back",
        invalid:"Please complete all fields", needAll:"Please answer all 16 questions",
        yourType:"Your MBTI is", recommend:"Recommended Faculty",
        reason:"Reason",
        npcSays:(name, age)=>`NPC: ${name} (${age})`,
        faculties:{
          eng:{ name:"Faculty of Engineering", about:"Great for analytical problem-solvers and innovators" },
          it:{ name:"Faculty of Information Technology", about:"Ideal for tech, digital innovation, and data analysis lovers" },
          bus:{ name:"Faculty of Business Administration", about:"For those bringing digital tech into business" },
          ic:{ name:"Faculty of International Communication", about:"For communication lovers, languages and cultures" },
          dti:{ name:"Digital Technology for Industrial Business", about:"For applying digital tech in industrial contexts" }
        },
        reasons:{
          eng:{ INTJ:"Strategic planner & tech developer", ENTJ:"Leader who manages complex systems", INTP:"Out‚Äëof‚Äëthe‚Äëbox thinker, loves experimenting", ISTP:"Hands‚Äëon maker, enjoys machines" },
          it:{ INTP:"Analytical thinker, system designer", ENTP:"Builds new technologies", INFJ:"Uses tech to help society", ISFP:"Creative in digital design" },
          bus:{ ESTJ:"Orderly, systems‚Äëminded manager", ISTJ:"Planner and business organizer", ESFJ:"People‚Äëoriented, service‚Äëminded", ENFJ:"Inspirational, people‚Äëcentric leader", ENFP:"Creative idea generator in business" },
          ic:{ ENFP:"Inspiring storyteller", ENTP:"Non‚Äëconformist, strong negotiator & presenter", INFJ:"Communicator for social change", ENFJ:"Influential speaker with charisma" },
          dti:{ INTJ:"Strategic planner & tech architect", ENTJ:"Leader of industrial tech systems", ISTJ:"Diligent, precise data analyst", INTP:"Analytical designer of new technologies" }
        },
        ui:{ next:"Next", selectAll:"Select All" },
        resultLine:(type, fac)=>`Your MBTI is <b>${type}</b> ‚Üí <b>${fac}</b>`
      },
      ja: {
        appTitle:"MBT(N)I √ó Â≠¶ÈÉ®„Éû„ÉÉ„ÉÅ„É≥„Ç∞",
        heroPill:"È≠îÊ≥ï„ÅÆÂ§ú„Å∏Âá∫Áô∫‚Äî„ÅÇ„Å™„Åü„Å´Âêà„ÅÜÂ≠¶ÈÉ®„ÇíÊé¢„Åù„ÅÜ",
        heroHint:"„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„ÅÆ„Åø‚ÄîÂÄã‰∫∫ÊÉÖÂ†±„ÅØ‰øùÂ≠ò„Åó„Åæ„Åõ„Çì",
        s1Title:"STEP 1 ¬∑ ÂÜíÈô∫ËÄÖ„Éó„É≠„Éï„Ç£„Éº„É´",
        lblNickname:"„Éã„ÉÉ„ÇØ„Éç„Éº„É†", lblAge:"Âπ¥ÈΩ¢", lblGender:"ÊÄßÂà•", gMale:"Áî∑ÊÄß", gFemale:"Â•≥ÊÄß", gOther:"„Åù„ÅÆ‰ªñ",
        toStep2:"‚ú® Ê¨°„Å∏Ôºö„ÉÜ„Çπ„Éà„ÇíÂèó„Åë„Çã",
        s2Title:"STEP 2 ¬∑ MBTI „ÉÜ„Çπ„Éà", s2Hint:"Ëá™ÂàÜ„Å´Ëøë„ÅÑÊñπ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑÔºà16ÂïèÔºâ",
        back:"‚óÄ Êàª„Çã", submit:"üîÆ ÈÄÅ‰ø°",
        s3Title:"STEP 3 ¬∑ ÁµêÊûú„Å®Â≠¶ÈÉ®„Å∏„ÅÆÊââ",
        redo:"üîÅ „ÇÇ„ÅÜ‰∏ÄÂ∫¶Âèó„Åë„Çã", goStep4:"üåå MBTI √ó Â≠¶ÈÉ®„ÅÆÂØæÂøú„ÇíË¶ã„Çã",
        s4Title:"STEP 4 ¬∑ Â≠¶ÈÉ®„ÅÆÂÆáÂÆô„ÇíÊé¢Ê§ú", s4Hint:"„Ç´„Éº„Éâ„Çí„Çø„ÉÉ„Éó/„ÇØ„É™„ÉÉ„ÇØ„ÅßÁêÜÁî±„ÇíË¶ã„Çã", back3:"‚óÄ Êàª„Çã",
        invalid:"„Åô„Åπ„Å¶ÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ", needAll:"16Âïè„Åô„Åπ„Å¶„Å´ÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
        yourType:"„ÅÇ„Å™„Åü„ÅÆ MBTI", recommend:"„Åä„Åô„Åô„ÇÅÂ≠¶ÈÉ®",
        reason:"ÁêÜÁî±",
        npcSays:(name, age)=>`NPC: ${name}Ôºà${age}Ôºâ`,
        faculties:{
          eng:{ name:"Â∑•Â≠¶ÈÉ®", about:"ÂàÜÊûê„ÉªË™≤È°åËß£Ê±∫„Éª„Ç§„Éé„Éô„Éº„Ç∑„Éß„É≥„ÅåÂ•Ω„Åç„Å™‰∫∫„Å´" },
          it:{ name:"ÊÉÖÂ†±ÊäÄË°ìÂ≠¶ÈÉ®", about:"„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„Éª„Éá„Ç∏„Çø„É´Èù©Êñ∞„Éª„Éá„Éº„ÇøÂàÜÊûê„Å´ËààÂë≥„Åå„ÅÇ„Çã‰∫∫„Å´" },
          bus:{ name:"ÁµåÂñ∂Â≠¶ÈÉ®", about:"„Éá„Ç∏„Çø„É´ÊäÄË°ì„Çí„Éì„Ç∏„Éç„Çπ„Å´Ê¥ªÁî®„Åó„Åü„ÅÑ‰∫∫„Å´" },
          ic:{ name:"ÂõΩÈöõ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥Â≠¶ÈÉ®", about:"„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÄÅË®ÄË™û„ÉªÊñáÂåñ„ÅåÂ•Ω„Åç„Å™‰∫∫„Å´" },
          dti:{ name:"Áî£Ê•≠„Éì„Ç∏„Éç„Çπ„ÅÆ„Åü„ÇÅ„ÅÆ„Éá„Ç∏„Çø„É´ÊäÄË°ìÂ≠¶ÈÉ®", about:"Áî£Ê•≠ÂàÜÈáé„Åß„Éá„Ç∏„Çø„É´ÊäÄË°ì„ÇíÊ¥ªÁî®„Åó„Åü„ÅÑ‰∫∫„Å´" }
        },
        reasons:{
          eng:{ INTJ:"Êà¶Áï•Á´ãÊ°à„Å®„ÉÜ„ÇØ„Éé„É≠„Ç∏„ÉºÈñãÁô∫„Å´Âº∑„ÅÑ", ENTJ:"„Ç∑„Çπ„ÉÜ„É†ÂÖ®‰Ωì„ÇíÁµ±Áéá„ÉªÁÆ°ÁêÜ„Åô„Çã„É™„Éº„ÉÄ„Éº", INTP:"ÂûãÁ†¥„Çä„ÅÆÊÄùËÄÉ„ÄÅÂÆüÈ®ì„Å®ÈñãÁô∫„ÅåÂ•Ω„Åç", ISTP:"Êâã„ÇíÂãï„Åã„ÅôËÅ∑‰∫∫„ÄÅÊ©üÊ¢∞„ÅÑ„Åò„Çä„ÅåÂæóÊÑè" },
          it:{ INTP:"ÂàÜÊûêÁöÑÊÄùËÄÉ„Åß„Ç∑„Çπ„ÉÜ„É†Ë®≠Ë®à„ÅåÂæóÊÑè", ENTP:"Êñ∞„Åó„ÅÑ„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„ÇíÂâµ„Çã", INFJ:"„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„ÅßÁ§æ‰ºöË≤¢ÁåÆ„Åó„Åü„ÅÑ", ISFP:"„Éá„Ç∏„Çø„É´„Éá„Ç∂„Ç§„É≥„ÅÆÂâµÈÄ†ÊÄß" },
          bus:{ ESTJ:"Áß©Â∫è„Å†„Å£„Åü„Éû„Éç„Ç∏„É°„É≥„Éà", ISTJ:"Ë®àÁîª„Å®„Ç™„Éö„É¨„Éº„Ç∑„Éß„É≥„Å´Âº∑„ÅÑ", ESFJ:"‰∫∫ÂΩì„Åü„Çä„ÅåËâØ„Åè„Çµ„Éº„Éì„ÇπÁ≤æÁ•ûÊó∫Áõõ", ENFJ:"‰∫∫„ÇíÈºìËàû„Åô„Çã„É™„Éº„ÉÄ„Éº", ENFP:"„Éì„Ç∏„Éç„Çπ„ÅÆÊñ∞„Åó„ÅÑ„Ç¢„Ç§„Éá„Ç¢„ÇíÁîü„ÅøÂá∫„Åô" },
          ic:{ ENFP:"‰∫∫„ÇíÊÉπ„Åç„Å§„Åë„Çã„Çπ„Éà„Éº„É™„Éº„ÉÜ„É©„Éº", ENTP:"‰∫§Ê∏â„Éª„Éó„É¨„Çº„É≥„Å´Âº∑„ÅÑÁô∫ÊÉ≥ÂÆ∂", INFJ:"Á§æ‰ºöÂ§âÈù©„ÇíÁõÆÊåá„Åô„Ç≥„Éü„É•„Éã„Ç±„Éº„Çø„Éº", ENFJ:"„Ç´„É™„Çπ„ÉûÊÄß„ÅÆ„ÅÇ„Çã„Çπ„Éî„Éº„Ç´„Éº" },
          dti:{ INTJ:"Êà¶Áï•ÁöÑ„Å™„ÉÜ„ÉÉ„ÇØ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà", ENTJ:"Áî£Ê•≠„ÉÜ„ÉÉ„ÇØ„ÅÆÁµ±Êã¨„É™„Éº„ÉÄ„Éº", ISTJ:"Á∑ªÂØÜ„ÅßÊ≠£Á¢∫„Å™„Éá„Éº„Çø„Ç¢„Éä„É™„Çπ„Éà", INTP:"Êñ∞ÊäÄË°ì„ÅÆÂàÜÊûê„ÉªË®≠Ë®àËÄÖ" }
        },
        ui:{ next:"Ê¨°„Å∏", selectAll:"„Åô„Åπ„Å¶ÈÅ∏Êäû" },
        resultLine:(type, fac)=>`„ÅÇ„Å™„Åü„ÅÆ MBTI „ÅØ <b>${type}</b> ‚Üí <b>${fac}</b>`
      }
    };

    let LANG = 'th';
    const $ = (sel)=>document.querySelector(sel);
    const $$ = (sel)=>document.querySelectorAll(sel);

    function setLang(lang){
      LANG = lang;
      // header
      $('#appTitle').textContent = i18n[lang].appTitle;
      $('#heroPill').textContent = i18n[lang].heroPill;
      $('#heroHint').textContent = i18n[lang].heroHint;
      $('#s1Title').textContent = i18n[lang].s1Title;
      $('#lblNickname').textContent = i18n[lang].lblNickname;
      $('#lblAge').textContent = i18n[lang].lblAge;
      $('#lblGender').textContent = i18n[lang].lblGender;
      $('#gMale').textContent = i18n[lang].gMale; $('#gFemale').textContent = i18n[lang].gFemale; $('#gOther').textContent = i18n[lang].gOther;
      $('#toStep2').textContent = i18n[lang].toStep2;
      $('#s2Title').textContent = i18n[lang].s2Title; $('#s2Hint').textContent = i18n[lang].s2Hint;
      $('#back1').textContent = i18n[lang].back; $('#submitQuiz').textContent = i18n[lang].submit;
      $('#s3Title').textContent = i18n[lang].s3Title; $('#redo').textContent = i18n[lang].redo; $('#goStep4').textContent = i18n[lang].goStep4;
      $('#s4Title').textContent = i18n[lang].s4Title; $('#s4Hint').textContent = i18n[lang].s4Hint; $('#back3').textContent = i18n[lang].back3;
      renderFacultyGrid();
      // Update existing result if present
      if(state.mbti){ showResult(); }
      // Update quiz questions text
      renderQuiz();
      // lang button states
      $$('.lang button').forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));
    }

    // ===================== DATA =====================
    const facultyOrder = ['eng','it','bus','ic','dti'];

    const facultyLists = {
      eng: ['INTJ','ENTJ','INTP','ISTP'],
      it:  ['INTP','ENTP','INFJ','ISFP'],
      bus: ['ESTJ','ISTJ','ESFJ','ENFJ','ENFP'],
      ic:  ['ENFP','ENTP','INFJ','ENFJ'],
      dti: ['INTJ','ENTJ','ISTJ','INTP']
    };

    // Pick animal emoji per MBTI
    const mbtiAnimal = {
      INTJ:'ü¶â', ENTJ:'ü¶Å', INTP:'ü¶ä', ISTP:'üê∫',
      ENTP:'üêí', INFJ:'ü¶å', ISFP:'üê±',
      ESTJ:'ü¶Ö', ISTJ:'ü¶´', ESFJ:'üê∂', ENFJ:'üê¨', ENFP:'ü¶ã'
    };

    // Questions: 16 items. Each item leans A or B side of a dichotomy.
    // dim: 'EI'|'SN'|'TF'|'JP' ; sideA: first letter, sideB: second letter
    const QUIZ = [
      // E vs I
      {id:1, dim:'EI', a:{ th:'‡∏â‡∏±‡∏ô‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏ö‡∏õ‡∏∞‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô', en:'I recharge by socializing', ja:'‰∫∫„Å®‰ºö„ÅÜ„Å®ÂÖÉÊ∞ó„Å´„Å™„Çã' }, b:{ th:'‡∏â‡∏±‡∏ô‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á', en:'I recharge by being alone', ja:'‰∏Ä‰∫∫„ÅÆÊôÇÈñì„ÅßÂõûÂæ©„Åô„Çã' }, sideA:'E', sideB:'I'},
      {id:2, dim:'EI', a:{ th:'‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Ç‡∏ì‡∏∞‡∏Ñ‡∏¥‡∏î‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢', en:'Think out loud', ja:'ËÄÉ„Åà„Å™„Åå„ÇâË©±„Åô' }, b:{ th:'‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏û‡∏π‡∏î', en:'Think first, speak later', ja:'ËÄÉ„Åà„Å¶„Åã„ÇâË©±„Åô' }, sideA:'E', sideB:'I'},
      {id:3, dim:'EI', a:{ th:'‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°', en:'Prefer group activities', ja:'„Ç∞„É´„Éº„ÉóÊ¥ªÂãï„ÅåÂ•Ω„Åç' }, b:{ th:'‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß', en:'Prefer solo tasks', ja:'‰∏Ä‰∫∫„Åß„ÅÆ‰ΩúÊ•≠„ÅåÂ•Ω„Åç' }, sideA:'E', sideB:'I'},
      {id:4, dim:'EI', a:{ th:'‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', en:'Quick decisions in public', ja:'Â†¥Èù¢„ÅßÁ¥†Êó©„ÅèÊ±∫„ÇÅ„Çã' }, b:{ th:'‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ ‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à', en:'Prefer quiet reflection first', ja:'Èùô„Åã„Å´ËÄÉ„Åà„Å¶„Åã„ÇâÊ±∫„ÇÅ„Çã' }, sideA:'E', sideB:'I'},
      // S vs N
      {id:5, dim:'SN', a:{ th:'‡∏¢‡∏∂‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô', en:'Focus on concrete, present facts', ja:'ÂÖ∑‰ΩìÁöÑ„ÅßÁèæÂÆüÁöÑ„Å™‰∫ãÂÆüÈáçË¶ñ' }, b:{ th:'‡∏°‡∏≠‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï', en:'See big picture and future trends', ja:'ÂÖ®‰ΩìÂÉè„Å®Â∞ÜÊù•„ÅÆÂÇæÂêë„ÇíË¶ã„Çã' }, sideA:'S', sideB:'N'},
      {id:6, dim:'SN', a:{ th:'‡∏ä‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡πÑ‡∏î‡πâ', en:'Like verifiable details', ja:'Ê§úË®º„Åß„Åç„ÇãË©≥Á¥∞„ÅåÂ•Ω„Åç' }, b:{ th:'‡∏ä‡∏≠‡∏ö‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ', en:'Like ideas and possibilities', ja:'„Ç¢„Ç§„Éá„Ç¢„Å®ÂèØËÉΩÊÄß„ÅåÂ•Ω„Åç' }, sideA:'S', sideB:'N'},
      {id:7, dim:'SN', a:{ th:'‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡∏£‡∏á', en:'Learn from direct experience', ja:'‰ΩìÈ®ì„Åã„ÇâÂ≠¶„Å∂' }, b:{ th:'‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö/‡∏ó‡∏§‡∏©‡∏é‡∏µ', en:'Learn from patterns/theory', ja:'„Éë„Çø„Éº„É≥„ÇÑÁêÜË´ñ„Åã„ÇâÂ≠¶„Å∂' }, sideA:'S', sideB:'N'},
      {id:8, dim:'SN', a:{ th:'‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô', en:'Follow step‚Äëby‚Äëstep process', ja:'ÊÆµÈöéÁöÑ„Å™ÊâãÈ†Ü„Å´Âæì„ÅÜ' }, b:{ th:'‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏ó‡∏≤‡∏á‡∏•‡∏±‡∏î', en:'Jump between ideas for shortcuts', ja:'„Ç¢„Ç§„Éá„Ç¢„ÇíÈ£õ„Å∞„Åó„Å¶ËøëÈÅì„Åô„Çã' }, sideA:'S', sideB:'N'},
      // T vs F
      {id:9, dim:'TF', a:{ th:'‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏£‡∏Å‡∏∞', en:'Decide by logic & reason', ja:'Ë´ñÁêÜ„Å®ÂêàÁêÜ„ÅßÊ±∫„ÇÅ„Çã' }, b:{ th:'‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Ñ‡∏ô', en:'Decide by people & feelings', ja:'‰∫∫„ÅÆÊ∞óÊåÅ„Å°„ÇíÈáçË¶ñ„Åó„Å¶Ê±∫„ÇÅ„Çã' }, sideA:'T', sideB:'F'},
      {id:10, dim:'TF', a:{ th:'‡∏ä‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡πÅ‡∏¢‡πâ‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•', en:'Enjoy rational debate', ja:'ÁêÜÊÄßÁöÑ„Å™Ë≠∞Ë´ñ„ÅåÂ•Ω„Åç' }, b:{ th:'‡∏ä‡∏≠‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏Å‡∏•‡∏°‡∏Å‡∏•‡∏∑‡∏ô', en:'Prefer harmony building', ja:'Ë™øÂíå„ÇíÂ§ßÂàá„Å´„Åô„Çã' }, sideA:'T', sideB:'F'},
      {id:11, dim:'TF', a:{ th:'‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤', en:'Direct and frank', ja:'„Çπ„Éà„É¨„Éº„Éà' }, b:{ th:'‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏Å‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏à', en:'Gentle and empathetic', ja:'„ÇÑ„Åï„Åó„ÅèÂÖ±ÊÑüÁöÑ' }, sideA:'T', sideB:'F'},
      {id:12, dim:'TF', a:{ th:'‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå', en:'Judge work by standards', ja:'Âü∫Ê∫ñ„ÅßË©ï‰æ°„Åô„Çã' }, b:{ th:'‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏î‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏ö‡∏£‡∏¥‡∏ö‡∏ó', en:'Judge by context & people', ja:'ÊñáËÑà„ÇÑ‰∫∫„ÇíËÄÉÊÖÆ„Åó„Å¶Ë©ï‰æ°' }, sideA:'T', sideB:'F'},
      // J vs P
      {id:13, dim:'JP', a:{ th:'‡∏ä‡∏≠‡∏ö‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤', en:'Plan ahead & finish early', ja:'Ë®àÁîªÁöÑ„Å´Êó©„ÇÅ„Å´ÁµÇ„Çè„Çâ„Åõ„Çã' }, b:{ th:'‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ', en:'Flexible, adapt on the fly', ja:'ÊüîËªü„Å´„Åù„ÅÆÂ†¥ÂØæÂøú' }, sideA:'J', sideB:'P'},
      {id:14, dim:'JP', a:{ th:'‡∏ä‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô', en:'Prefer fixed schedule', ja:'Ê±∫„Åæ„Å£„Åü„Çπ„Ç±„Ç∏„É•„Éº„É´„ÅåÂ•Ω„Åç' }, b:{ th:'‡∏ä‡∏≠‡∏ö‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏ß‡πâ‡∏≤‡∏á', en:'Keep options open', ja:'ÈÅ∏ÊäûËÇ¢„ÇíÈñã„ÅÑ„Å¶„Åä„Åè' }, sideA:'J', sideB:'P'},
      {id:15, dim:'JP', a:{ th:'‡∏à‡∏±‡∏î‡πÇ‡∏ï‡πä‡∏∞/‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö', en:'Keep desk/files tidy', ja:'Êú∫„ÇÑ„Éï„Ç°„Ç§„É´„ÇíÊï¥ÁêÜÊï¥È†ì' }, b:{ th:'‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß', en:'Personal, flexible order', ja:'Ëá™ÂàÜÊµÅ„ÅÆ„ÇÜ„Çã„ÅÑÊï¥ÁêÜ' }, sideA:'J', sideB:'P'},
      {id:16, dim:'JP', a:{ th:'‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏°‡∏∑‡∏≠', en:'Want the plan before acting', ja:'Âßã„ÇÅ„ÇãÂâç„Å´Ë®àÁîª„ÇíÁü•„Çä„Åü„ÅÑ' }, b:{ th:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢ ‡∏Ñ‡πà‡∏≠‡∏¢‡∏î‡∏≥‡∏ô‡πâ‡∏≥‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ', en:'Start now, learn as you go', ja:'„Åæ„ÅöÂßã„ÇÅ„Å¶ÈÄ≤„Åø„Å™„Åå„ÇâÂ≠¶„Å∂' }, sideA:'J', sideB:'P'}
    ];

    // ===================== STATE =====================
    const state = { profile:null, answers: {}, mbti: null, faculty: null };

    // ===================== RENDERERS =====================
    function showSection(id){
      $$('.step').forEach(s=>s.classList.remove('active'));
      $("#"+id).classList.add('active');
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function renderQuiz(){
      const box = $('#quiz');
      box.innerHTML = '';
      QUIZ.forEach(q=>{
        const wrap = document.createElement('div');
        wrap.className = 'q';
        const title = document.createElement('h4');
        title.innerText = `${q.id}. ${q.a[LANG]} ‚Ä¢ ${q.b[LANG]}`;
        wrap.appendChild(title);

        const opts = document.createElement('div');
        opts.className = 'opt';
        const idA = `q${q.id}A`; const idB = `q${q.id}B`;
        opts.innerHTML = `
          <label for="${idA}"><input type="radio" name="q${q.id}" id="${idA}" value="A"> <span>${q.a[LANG]}</span></label>
          <label for="${idB}"><input type="radio" name="q${q.id}" id="${idB}" value="B"> <span>${q.b[LANG]}</span></label>
        `;
        wrap.appendChild(opts);
        box.appendChild(wrap);
      });
    }

    function computeMBTI(){
      const scores = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
      for(const q of QUIZ){
        const sel = document.querySelector(`input[name=q${q.id}]:checked`);
        if(!sel) return null; // require all answered
        if(sel.value==='A') scores[q.sideA]++; else scores[q.sideB]++;
      }
      // build type; ties resolve to first letter (E,S,T,J)
      const EI = scores.E>=scores.I? 'E':'I';
      const SN = scores.S>=scores.N? 'S':'N';
      const TF = scores.T>=scores.F? 'T':'F';
      const JP = scores.J>=scores.P? 'J':'P';
      return EI+SN+TF+JP;
    }

    function pickFacultyFor(type){
      // choose first faculty in order that contains type
      for(const key of facultyOrder){ if(facultyLists[key].includes(type)) return key; }
      // fallback by dimension
      const fallback = type.includes('N')? (type.includes('T')? 'eng':'ic') : (type.includes('T')? 'dti':'bus');
      return fallback;
    }

    function showResult(){
      const t = i18n[LANG];
      const facName = t.faculties[state.faculty].name;
      const line = t.resultLine(state.mbti, facName);
      const reasonMap = t.reasons[state.faculty];
      const reason = reasonMap[state.mbti] || t.faculties[state.faculty].about;
      $('#resultBox').innerHTML = `
        <div class="card" style="background:#0c1230; border:1px solid #7db2ff44">
          <div style="font-size:22px; font-weight:900; margin-bottom:6px">${line}</div>
          <div class="reason"><b>${t.reason}:</b> ${reason}</div>
        </div>
      `;
      // NPC animation
      const npc = $('#npc');
      const emoji = mbtiAnimal[state.mbti] || 'üßô‚Äç‚ôÇÔ∏è';
      $('#npcEmoji').textContent = emoji;
      const name = state.profile?.nickname || 'NPC';
      const age = state.profile?.age || '?';
      $('#npcTag').textContent = t.npcSays(name, age);
      npc.style.display = 'flex';
      // restart animation
      npc.style.animation = 'none'; npc.offsetHeight; npc.style.animation = null;
    }

    function renderFacultyGrid(){
      const t = i18n[LANG];
      const grid = $('#facultyGrid');
      grid.innerHTML = '';
      for(const key of facultyOrder){
        const card = document.createElement('div'); card.className='faculty';
        const name = t.faculties[key].name; const about = t.faculties[key].about;
        const list = facultyLists[key];
        const badges = list.map(m=>`<span class="badge">${m}</span>`).join('');
        // detail reasons list
        let details = '';
        for(const m of list){ const r = t.reasons[key][m] || ''; details += `<div class="reason"><b>${m}</b> ‚Äî ${r}</div>`; }
        card.innerHTML = `
          <h3>${name}</h3>
          <div class="hint" style="margin-bottom:6px">${about}</div>
          <div>${badges}</div>
          <div style="margin-top:8px">${details}</div>
        `;
        grid.appendChild(card);
      }
    }

    // ===================== EVENTS =====================
    $('#toStep2').addEventListener('click', ()=>{
      const nickname = $('#nickname').value.trim();
      const age = parseInt($('#age').value, 10);
      const gender = $('#gender').value;
      if(!nickname || !age || age<8 || age>80){ alert(i18n[LANG].invalid); return; }
      state.profile = {nickname, age, gender};
      showSection('step2');
    });

    $('#back1').addEventListener('click', ()=> showSection('step1'));

    $('#submitQuiz').addEventListener('click', ()=>{
      const type = computeMBTI();
      if(!type){ alert(i18n[LANG].needAll); return; }
      state.mbti = type;
      state.faculty = pickFacultyFor(type);
      showSection('step3');
      showResult();
    });

    $('#redo').addEventListener('click', ()=>{ state.mbti=null; state.faculty=null; $$('input[type=radio]').forEach(r=>r.checked=false); showSection('step2'); });
    $('#goStep4').addEventListener('click', ()=>{ renderFacultyGrid(); showSection('step4'); });
    $('#back3').addEventListener('click', ()=> showSection('step3'));

    // language buttons
    $$('.lang button').forEach(btn=> btn.addEventListener('click', ()=> setLang(btn.dataset.lang)) );

    // initial renders
    renderQuiz(); renderFacultyGrid();

    // Set default language Thai
    setLang('th');
  </script>
</body>
</html>
